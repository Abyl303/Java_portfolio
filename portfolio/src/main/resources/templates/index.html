<!doctype html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Task Manager</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 24px auto; padding: 0 12px; }
        h1 { margin-bottom: 12px; }
        form { margin: 10px 0; }
        input[type="text"] { padding: 8px; width: 260px; }
        .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
        button { padding: 8px 12px; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; margin-top: 14px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #f6f6f6; text-align: left; }
        .ok { color: #0a7; font-weight: 600; }
        .no { color: #a40; font-weight: 600; }
        .actions form { display: inline; }
    </style>
</head>
<body>

<h1>Task Manager</h1>

<h2>Создать задачу</h2>
<form method="post" action="/tasks">
    <div class="row">
        <input type="text" name="title" placeholder="Title" required>
        <input type="text" name="description" placeholder="Description" required>

        <!-- чтобы status всегда приходил -->
        <input type="hidden" name="status" value="false"/>
        <label>
            <input type="checkbox" name="status" value="true">
            Active
        </label>

        <button type="submit">Add</button>
    </div>
</form>

<h2>Список задач</h2>

<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Description</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr th:if="${#lists.isEmpty(tasks)}">
        <td colspan="5">Нет задач</td>
    </tr>

    <tr th:each="t : ${tasks}">
        <td th:text="${t.id}"></td>
        <td th:text="${t.title}"></td>
        <td th:text="${t.description}"></td>
        <td>
            <span th:if="${t.status}" class="ok">ACTIVE</span>
            <span th:if="${!t.status}" class="no">INACTIVE</span>
        </td>
        <td class="actions">
            <form th:action="@{/tasks/{id}/activate(id=${t.id})}" method="post">
                <button type="submit">Activate</button>
            </form>

            <form th:action="@{/tasks/{id}/deactivate(id=${t.id})}" method="post">
                <button type="submit">Deactivate</button>
            </form>

            <form th:action="@{/tasks/{id}/delete(id=${t.id})}" method="post">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>
